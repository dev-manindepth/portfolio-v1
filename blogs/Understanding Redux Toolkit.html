<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Understaing Redux</title>
      <link rel="stylesheet" href="../style.css" />
   </head>
   <body>
         <nav class="navigation container">
      <div class="nav-brand"><a href="../index.html">manish</a> </div>
    
      <ul class="nav-menu">
        <li class="nav-item"><a class="nav-link" href="../index.html">home</a></li>
        <li class="nav-item"><a class="nav-link" href="../projects.html">Projects</a></li>
        <li class="nav-item"><a class="nav-link" href="../blog.html">blogs</a></li>
      </ul>
    </nav>
      <article class="article-post">
         <h1 class="article-title">Understaing Redux Toolkit </h1>
          <p class="article-phase">✍️ beta phase</p>
        <div class="article-prerequisite">Prerequisite : Familarity With React and Redux Ecosystem</div>
         <img
            class="article-image"
            src="https://hybridheroes.de/blog/content/images/2022/03/redux-toolkit-1400.jpg"
            alt="react image"
            />
         <h2 class="article-subtitle">What is Redux Toolkit </h2 class="article-subtitle">
         <p>
          As per Redux Toolkit offical documentation Redux Toolkit is  “the official, opinionated, batteries-included toolset for efficient Redux development.” . 
          It provides abstraction over plain core redux. Behind the scene it uses
            <ul>
              <li><span>Redux</span> for state management and </li>
              <li><span>React-Redux</span> as react binding and for selecting state from global store and dispatching actions </li>
              <li><span>Immer library</span> for handling immutability in store</li>
            </ul>
            
         </p>
         <h3>Redux Toolkit solves some major issues of Redux</h3>
         <ul>
            <li>Configuring a Redux store is too complicated . Like In Plain core redux we have to use <span>combineReducer() method  </span>to combine all the reducers and also <span>middleware</span>  to define middleware for basic debugging </li>
            <li>We have to add a lot of packages like <span>redux-thunk , chrome devtools extension</span> to get Redux to do anything useful </li>
            <li>Redux requires too much boilerplate code like <span>Writting action constants and define action creator</span> ,writting reducer and many other things </li>
         </ul>
         <h3>Redux Toolkit combine the logic of reducer and action at one place . We call it slice  </h3>
         <p> Consider redux toolkit store as combination of slices .Each Slice has a identifier name as key and some reducers inside it to perform state transtition.It also takes initialState as a named key which defines the initial state for particular slice . And In Redux toolkit we only have to  write reducers function .Based on reducer function action constants and action creaters are generated by redux toolkit behind the scene . </p>  
          <p>
           Redux toolkit is opiniated means it has some opinion that need to be followed like the folder structure like  app folder contain a file called store.js and features folder contains folders for each feature like for 
         </p>
         <dl>
           <dt>📁 app</dt>
           <dd>store.js</dd>
           <dt>📁 features</dt>
           <dt >&emsp;📁 count</dt>
           <dd>&ensp; 📄countSlice.js</dd>
           <dt >&emsp;📁 user </dt>
           <dd>&ensp; 📄userSlice.js</dd>
            <dt >&emsp;📁 search</dt>
           <dd>&ensp; 📄searchSlice.js</dd> 
           <dt >&emsp;📁 auth</dt>
           <dd>&ensp; 📄authSlice.js</dd> 
         </dl> 
         
         <p>
        To create a slice first create a 📁 features folder and make folders for respective feature for ex -> search is a feature hence inside features folder we should create a folder 📁 search similarly if we want auth feature then we should another folder inside features called 📁 auth . Now after creating feature folder let's define a feature slice file inside it . Create a file inside any feature folder with the name of feature and suffixing slice at the end . for ex-> for feature search the file name should be 📄searchSlice.js here search is the name of feature and we append Slice at the end of it , for  feature auth the file name should be 📄authSlice.js here feature name is auth and we have appended Slice at the end  similarly for feature user the file name should be  📄userSlice.js here also user is feature and Slice is suffix 
      </p>
         <p>Redux toolkit provides us a <span>createSlice</span> method to create a slice . The create slice takes a configuration object as argument ,which has few mandatory name key to be defined like <span>name , initialState , reducers </span></p>
         <code>
           <pre>

      const { createStore } 
      from '@reduxjs/toolkit';

      const initialState={
        count:0
      }
      const countSlice = createSlice({
        name:'count',
        initialState:initialState,
        reducers:{
          increment:(state,action)=>{
        state.count += action.payload 
          },
          decrement:(state,action)=>{
        state.count -= action.payload
          },
          reset:(state,action)=>{
        state.count = 0
          }
        } 
      })

      export default countReducer = 
      countSlice.reducer;
      export const { 
        increment,
        decrement , 
        reset } = countSlice.actions;  
           </pre>
         </code>
     <p>
       Let's revise what we have learnt above about createSlice() method and deep dive into it . 
       <span>createSlice() </span> method takes a configuration object as a argument ,the configuratin object itself have some essential key that needs to be defined like name of slice , initialState of slice and reducers for performing state transtition of state . The named key `name` should be give a proper name because this name will be used a prefix will generating action constants by Redux Toolkit . The named key `initialState` as the name says should contain the initialState of application . The named key `reducers` is a callback function it is similar to the reducers of plain redux core The reducer name is also used while generating action constants hence a readable name should be used . It recieves state (previous state) and action as its argument . The special thing about this reducer is that here we can mutate the state but this was illegal in redux core ,Actually Redux toolkit uses a library called  <span>Immer </span> which handles the state immutability means Redux allow us to write mutable code inside reducer function but behind the scene <span>immer library</span> will convert back our mutable code to immutable
     </p>
     <p>Redux Toolkit generates the action constants and action creator function behind the scene .The action constants generated by Redux Toolkit  follows this pattern.  It starts with the `name` key of slice and a seperator as `/` followed by  individual `reducer` key name  for ex - for above example the name of slice is `count ` and the name of reducer are increment , decrement and reset , hence the action constants name will look like
      <ul>
        <li><span>count + increment -> count/increment </span></li>
        <li><span>count + decrement -> count/decrement </span></li>
        <li><span>count + reset -> count/reset </span></li>
      </ul> 
      </p>
      <p>
        The name of action creator generated by Redux Toolkit is same as the name of reducer defined for ex for above example we have defined three name reducer like increment decrement and reset , Redux Toolkit will produce action creator of same name like increment decrement and reset
      </p>
      <p>
        createSlice() method exports the reducer and action creator functions . As a best practice we should export reducer as default export and action creators as named export because there can be only one default export and we have multiple action creator generated . So to we will default export for reducer and named export for exporting all the action creator function 
      </p>

         <h3>Configuring Store in redux toolkit </h3>
         <p>Redux toolkit do a lot of work behind the scene . By default redux toolkit have setup redux thunk as middleware and use combine middleware to combine all the middleware</p>
         <code>
             <pre>

      import { configureStore } 
      from '@reduxjs/toolkit';
      
      import countReducer from
      './features/count/countSlice';
      
      import authReducer from 
      './features/auth/authSlice'
      
      import userSlice from 
      './features/user/userSlice'


      const store= configureStore({
          reducer:{
            count:countReducer,
            user:userReducer,
            auth:authReducer 
          }
      })

      export default store;
             </pre>
         </code>
         <p>
           Redux Toolkit provides us configureStore() function to create store ,earlier in core redux we used to use createStore() for creating store. <br>
           configureStore() also takes a configuration object as argument. It has some name key like `reducer` which takes a object with all the reducer  , <br>
            By default the configureStore function have setup basic middlewares for us and it uses combineReducer behind the scene to combine all the reducer we got rid of this pain 

         </p>
        
         <h3>Providing Store to component</h3>
         <p>Now we have created feature slice and store , But still our comopents are unaware of these . To make store available to all the components wrap the <span>&lt;App&gt;</span>  component with <span> &lt;Provider&gt; Higher Order Component</span> provided by 'react-redux' package . It will take store as props and make the store available to all the component </p>
         <code>
           <pre>

      import {Provider } from 
      'react-redux'

      import store from './app/store'

      const root = ReactDOM
      .createRoot(
        document.getElementById("root")
        );

      root.render(
        &lt;Provider store={store}&gt;
          &lt;App /&gt;
        &lt;/Provider&gt;   
      );

           </pre>
         </code>
         <h3>Consuming Store inside Component</h3>
         <p>
           Now the store is available to all the component . To use store inside component we need to take help of <span> useSelector Hook </span> which will give us state . useSelector Hook takes a selector callback function which select only that part of store that we want . Obviously we don't always want all the store . So we should wisely select only those part of store which we need . Also useSelector Hook is subscribed to store means every time the value in store change the useSelector hook rerun the selector function passed to it and gives us fresh copy of state and which inturn rerender our component 
         </p>
         <code>
           <pre>
      
      import {useSelector} 
      from 'react-redux';
      
      const Counter =()=>{
        const selector= 
          (state)=>state.count;
        const count = 
          useSelector(selector);

        return (
          &lt;&gt;
            &lt;h2&gt; Count : { count} 
            &lt;h2&gt;
          &lt;&gt;

        )
      }
           </pre>
         </code>
         <h4>Dispatching Actions from component</h4>
         <p>Currently our component is just showing the count value from store but it is not performing any action . To perform any action we need dispatch() function which can send our action to store  </p>
                  <code>
           <pre>
      
      import {
        useSelector,
        dispatch 
       } 
      from 'react-redux'; 

      import { 
        increment,
        decrement ,
        reset
      } from './countSlice'
      
      const Counter =()=>{
        const selector= 
        (state)=>state.count;
        
        const count = 
        useSelector(selector);

        const dispatch = useDispatch()

        return (
          &lt;&gt;
            &lt;h2&gt; Count : { count}
             &lt;/h2&gt;

            &lt;button 
        onClick={
          ()=>dispatch(increment(1)
        }
            &gt; Increment &lt;button&gt;

            &lt;button 
        onClick={
          ()=>dispatch(decrement(2)
        }
            &gt; Decrement &lt;button&gt;
            &lt;button 
        onClick={
          ()=>dispatch()
        }
            &gt; Reset &lt;button&gt;
          &lt;&gt;

        )
      }
           </pre>
         </code>
            </article>
                <footer class="container footer">
      <h2 class="section-title">Connect with me</h2 class="article-subtitle">
      <ul class="social-links">
        <li>
          <a
            href="https://www.linkedin.com/in/manish-kumar-a7913818a/"
            target="_blank"
          >
            <img
              class="social-icon"
              src="../social icons/linkedin-alt.svg"
              alt=""
            />
          </a>
        </li>
        <li>
          <a href="https://github.com/dev-manindepth" target="_blank">
            <img
              class="social-icon"
              src="../social icons/github-alt.svg"
              alt=""
            />
          </a>
        </li>
        <li>
          <a
            href="https://www.instagram.com/manishpatedhawala/"
            target="_blank"
          >
            <img
              class="social-icon"
              src="../social icons/instagram.svg"
              alt=""
            />
          </a>
        </li>
        <li>
          <img
            class="social-icon"
            src="../social icons/twitter-alt.svg"
            alt=""
          />
          <a href="https://twitter.com/Manishk73087268" target="_blank"></a>
        </li>
      </ul>
    </footer>
        </body>
</html>